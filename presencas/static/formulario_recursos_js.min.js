const MAX_IMAGENS=12;function remove_ultimo_campo(e){let[a,o,t]=[e.target.name,e.data.variavel,e.data.nome_botao_adicionar];$(`#${o} > tbody > tr `).filter((e,o)=>{if($(o).find(`[name*="${a}"]`).length>0)return o}).remove(),11==$(`#${o} > tbody`).children().length&&$(`#${t}`).prop("disabled",!1)}function adiciona_bloco(e){let[a,o,t,n]=[e.data.variavel,e.data.nome_botao_remover,e.data.nome_botao_adicionar,e.data.callback];if(0==$(`#${a} > tbody`).children().length){let i=$($.parseHTML("{{ renderiza_tabelas_campos(form.imagens) }}")).find(":nth-child(1)");$(i).children("[id *= -erro-]").remove(),i=$(i).find(":nth-child(1)").get(0).outerHTML,$(`#${a} > tbody`).append(i.replaceAll(RegExp(`${a}-[0-9]+`,"g"),a+"-0")),$(`#${a} tbody tr [name*="-${o}"]:last`).on("click",e.data,n);return}let r=String($(`#${a} > tbody > tr:last > td > fieldset`).attr("name")),[m,l]=[r.split("-")[0],Number(r.split("-")[1])+1],d=$(`#${a} > tbody > tr:last`).clone();$(d).find("[id *= -erro-]").remove(),$(d).html($(d).html().replaceAll(RegExp(`${m}-[0-9]+`,"g"),m+"-"+l)),$(`#${a}`).append($(d).prop("outerHTML")),$(`#${a} tbody tr [name*="-${o}"]:last`).on("click",e.data,n),$(`#${a} > tbody`).children().length==("links"==a?MAX_LINKS:"imagens"==a?12:MAX_PALAVRAS_CHAVE)&&$(`#${t}`).prop("disabled",!0)}$("#adicionar_campo_imagem").on("click",{variavel:"imagens",nome_botao_remover:"remover_campo_imagem",nome_botao_adicionar:"adicionar_campo_imagem",callback:remove_ultimo_campo},adiciona_bloco),$('#imagens [name*="-remover_campo_imagem"]').on("click",{variavel:"imagens",nome_botao_adicionar:"adicionar_campo_imagem"},remove_ultimo_campo),$(":root").on("change",'input[type="file"]',function(e){let a=e.target.files;for(let o=0;o<a.length;o++)-1==a[o].name.search(/(.png|.jpeg|.jpg|.jfif)$/g)&&$(`input[name="${e.target.name}"]`).val("")}),$("#nome").on("input",function(e){$("#nome-erro").remove(),$(e.target).off("input")}),$("#imagens td input").on("input",function(e){$(e.target).parent($(`#${e.target.id}`)).next("[id *= -erro-]").remove(),$(e.target).off("input")});