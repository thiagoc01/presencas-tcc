function remove_ultimo_campo(a){let[o,e,i]=[a.target.name,a.data.variavel,a.data.nome_botao_adicionar];$(`#${e} > tbody > tr `).filter((a,e)=>{if($(e).find(`[name*="${o}"]`).length>0)return e}).remove(),$(`#${e} > tbody`).children().length==VARIAVEL_MAX[e]-1&&$(`#${i}`).prop("disabled",!1)}function adiciona_bloco(a){let[o,e,i,c]=[a.data.variavel,a.data.nome_botao_remover,a.data.nome_botao_adicionar,a.data.callback];if(0==$(`#${o} > tbody`).children().length){let r;switch(o){case"links":r=$($.parseHTML(A)).find(":nth-child(1)");break;case"imagens":r=$($.parseHTML(B)).find(":nth-child(1)");break;case"palavras_chave":r=$($.parseHTML(C)).find(":nth-child(1)");break;case"linguagem":r=$($.parseHTML(D)).find(":nth-child(1)");break;case"cidade_atuacao":r=$($.parseHTML(E)).find(":nth-child(1)");break;case"estado_atuacao":r=$($.parseHTML(F)).find(":nth-child(1)");break;case"pais_atuacao":r=$($.parseHTML(G)).find(":nth-child(1)")}$(r).children("[id *= -erro-]").remove(),r=$(r).find(":nth-child(1)").get(0).outerHTML,$(`#${o} > tbody`).append(r.replaceAll(RegExp(`${o}-[0-9]+`,"g"),o+"-0")),$(`#${o} tbody tr [name*="-${e}"]:last`).on("click",a.data,c);return}let t=String($(`#${o} > tbody > tr:last > td > fieldset`).attr("name")),[n,m]=[t.split("-")[0],Number(t.split("-")[1])+1],l=$(`#${o} > tbody > tr:last`).clone();$(l).find("[id *= -erro-]").remove(),$(l).html($(l).html().replaceAll(RegExp(`${n}-[0-9]+`,"g"),n+"-"+m)),$(`#${o}`).append($(l).prop("outerHTML")),$(`#${o} tbody tr [name*="-${e}"]:last`).on("click",a.data,c),"imagens"==o&&$("#imagens tbody tr input[type='file']:last").prev().css("background-color","").css("color",""),$(`#${o} > tbody`).children().length==VARIAVEL_MAX[o]&&$(`#${i}`).prop("disabled",!0)}function obtem_progresso(a){$.ajax({url:`/api/obter_progresso/${a}`,type:"GET",dataType:"text",processData:!1,contentType:!1,success(a){porcentagem=(100*a).toFixed(2),$("#barra-carregamento").css("width",porcentagem+"%"),$("#barra-carregamento").text(Math.round(porcentagem)+"%"),$("#barra-carregamento").attr("aria-valuenow",porcentagem),100==Math.round(porcentagem)&&clearInterval(id_intervalo)}})}VARIAVEL_MAX={links:8,imagens:12,palavras_chave:12,linguagem:12,cidade_atuacao:4,estado_atuacao:4,pais_atuacao:4},id_intervalo=void 0,id_solicitacao=Math.floor(Math.random()*(1e20-1)+1).toString(),$("#adicionar_campo_link").on("click",{variavel:"links",nome_botao_remover:"remover_campo_link",nome_botao_adicionar:"adicionar_campo_link",callback:remove_ultimo_campo},adiciona_bloco),$("#adicionar_campo_imagem").on("click",{variavel:"imagens",nome_botao_remover:"remover_campo_imagem",nome_botao_adicionar:"adicionar_campo_imagem",callback:remove_ultimo_campo},adiciona_bloco),$("#adicionar_campo_palavras_chave").on("click",{variavel:"palavras_chave",nome_botao_remover:"remover_campo_palavras_chave",nome_botao_adicionar:"adicionar_campo_palavras_chave",callback:remove_ultimo_campo},adiciona_bloco),$("#adicionar_campo_linguagem").on("click",{variavel:"linguagem",nome_botao_remover:"remover_campo_linguagem",nome_botao_adicionar:"adicionar_campo_linguagem",callback:remove_ultimo_campo},adiciona_bloco),$("#adicionar_campo_cidade_atuacao").on("click",{variavel:"cidade_atuacao",nome_botao_remover:"remover_campo_cidade_atuacao",nome_botao_adicionar:"adicionar_campo_cidade_atuacao",callback:remove_ultimo_campo},adiciona_bloco),$("#adicionar_campo_estado_atuacao").on("click",{variavel:"estado_atuacao",nome_botao_remover:"remover_campo_estado_atuacao",nome_botao_adicionar:"adicionar_campo_estado_atuacao",callback:remove_ultimo_campo},adiciona_bloco),$("#adicionar_campo_pais_atuacao").on("click",{variavel:"pais_atuacao",nome_botao_remover:"remover_campo_pais_atuacao",nome_botao_adicionar:"adicionar_campo_pais_atuacao",callback:remove_ultimo_campo},adiciona_bloco),$('#links [name*="-remover_campo_link"]').on("click",{variavel:"links",nome_botao_adicionar:"adicionar_campo_link"},remove_ultimo_campo),$('#imagens [name*="-remover_campo_imagem"]').on("click",{variavel:"imagens",nome_botao_adicionar:"adicionar_campo_imagem"},remove_ultimo_campo),$('#palavras_chave [name*="-remover_campo_palavras_chave"]').on("click",{variavel:"palavras_chave",nome_botao_adicionar:"adicionar_campo_palavras_chave"},remove_ultimo_campo),$('#linguagem [name*="-remover_campo_linguagem"]').on("click",{variavel:"linguagem",nome_botao_adicionar:"adicionar_campo_linguagem"},remove_ultimo_campo),$('#cidade_atuacao [name*="-remover_campo_cidade_atuacao"]').on("click",{variavel:"cidade_atuacao",nome_botao_adicionar:"adicionar_campo_cidade_atuacao"},remove_ultimo_campo),$('#estado_atuacao [name*="-remover_campo_estado_atuacao"]').on("click",{variavel:"estado_atuacao",nome_botao_adicionar:"adicionar_campo_estado_atuacao"},remove_ultimo_campo),$('#pais_atuacao [name*="-remover_campo_pais_atuacao"]').on("click",{variavel:"pais_atuacao",nome_botao_adicionar:"adicionar_campo_pais_atuacao"},remove_ultimo_campo),$(":root").on("change",'input[type="file"]',function(a){let o=a.target.files;for(let e=0;e<o.length;e++)-1==o[e].name.search(/(.png|.jpeg|.jpg|.jfif)$/g)&&$(`input[name="${a.target.name}"]`).val(""),$(`input[name="${a.target.name}"]`).val()?$(`input[name="${a.target.name}"]`).prev().css("background-color","green").css("color","white"):$(`input[name="${a.target.name}"]`).prev().css("background-color","").css("color","")}),["nome","trajetoria","producao","ultima_atualizacao","pesquisante","email_pesquisante","data_inicio","data_fim","quantidade","genero","pagina","cidade","estado"].forEach(a=>{$(`#${a}`).on("input",function(o){$("#"+a+"-erro").remove(),$(o.target).off("input")})}),["links","imagens","palavras_chave","linguagem","cidade_atuacao","estado_atuacao","pais_atuacao"].forEach(a=>{$(`#${a} td input`).on("input",function(a){$(a.target).parent($(`#${a.target.id}`)).next("[id *= -erro-]").remove(),$(a.target).off("input")})}),$("form").submit(function(a){a.preventDefault(),$.ajax({type:"POST",contentType:!1,data:new FormData(this),dataType:"html",processData:!1,beforeSend:function(){$("body").prepend($.parseHTML(HTML_BARRA_PROGRESSO)),$("body").css("scrollbar-width","100vh"),id_intervalo=setInterval(obtem_progresso,500,id_solicitacao),this.data.append("id_solicitacao",id_solicitacao)},success(a){clearInterval(id_intervalo),document.open(),document.write(a),document.close()},error(a){clearInterval(id_intervalo),document.write(a.responseText),document.close()}})});