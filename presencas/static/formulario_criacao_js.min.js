const MAX_LINKS=8,MAX_IMAGENS=MAX_PALAVRAS_CHAVE=12;function remove_ultimo_campo(a){let[o,e,i]=[a.target.name,a.data.variavel,a.data.nome_botao_adicionar];$(`#${e} > tbody > tr `).filter((a,e)=>{if($(e).find(`[name*="${o}"]`).length>0)return e}).remove(),$(`#${e} > tbody`).children().length==("links"==e?7:"imagens"==e?MAX_IMAGENS-1:MAX_PALAVRAS_CHAVE-1)&&$(`#${i}`).prop("disabled",!1)}function adiciona_bloco(a){let[o,e,i,n]=[a.data.variavel,a.data.nome_botao_remover,a.data.nome_botao_adicionar,a.data.callback];if(0==$(`#${o} > tbody`).children().length){let r;r="links"==o?$($.parseHTML(A)).find(":nth-child(1)"):"imagens"==o?$($.parseHTML(B)).find(":nth-child(1)"):$($.parseHTML(C)).find(":nth-child(1)"),$(r).children("[id *= -erro-]").remove(),r=$(r).find(":nth-child(1)").get(0).outerHTML,$(`#${o} > tbody`).append(r.replaceAll(RegExp(`${o}-[0-9]+`,"g"),o+"-0")),$(`#${o} tbody tr [name*="-${e}"]:last`).on("click",a.data,n);return}let t=String($(`#${o} > tbody > tr:last > td > fieldset`).attr("name")),[c,l]=[t.split("-")[0],Number(t.split("-")[1])+1],m=$(`#${o} > tbody > tr:last`).clone();$(m).find("[id *= -erro-]").remove(),$(m).html($(m).html().replaceAll(RegExp(`${c}-[0-9]+`,"g"),c+"-"+l)),$(`#${o}`).append($(m).prop("outerHTML")),$(`#${o} tbody tr [name*="-${e}"]:last`).on("click",a.data,n),$(`#${o} > tbody`).children().length==("links"==o?8:"imagens"==o?MAX_IMAGENS:MAX_PALAVRAS_CHAVE)&&$(`#${i}`).prop("disabled",!0)}$("#adicionar_campo_link").on("click",{variavel:"links",nome_botao_remover:"remover_campo_link",nome_botao_adicionar:"adicionar_campo_link",callback:remove_ultimo_campo},adiciona_bloco),$("#adicionar_campo_imagem").on("click",{variavel:"imagens",nome_botao_remover:"remover_campo_imagem",nome_botao_adicionar:"adicionar_campo_imagem",callback:remove_ultimo_campo},adiciona_bloco),$("#adicionar_campo_palavras_chave").on("click",{variavel:"palavras_chave",nome_botao_remover:"remover_campo_palavras_chave",nome_botao_adicionar:"adicionar_campo_palavras_chave",callback:remove_ultimo_campo},adiciona_bloco),$('#links [name*="-remover_campo_link"]').on("click",{variavel:"links",nome_botao_adicionar:"adicionar_campo_link"},remove_ultimo_campo),$('#imagens [name*="-remover_campo_imagem"]').on("click",{variavel:"imagens",nome_botao_adicionar:"adicionar_campo_imagem"},remove_ultimo_campo),$('#palavras_chave [name*="-remover_campo_palavras_chave"]').on("click",{variavel:"palavras_chave",nome_botao_adicionar:"adicionar_campo_palavras_chave"},remove_ultimo_campo),$(":root").on("change",'input[type="file"]',function(a){let o=a.target.files;for(let e=0;e<o.length;e++)-1==o[e].name.search(/(.png|.jpeg|.jpg|.jfif)$/g)&&$(`input[name="${a.target.name}"]`).val("")}),["nome","trajetoria","producao","ultima_atualizacao","pesquisante","email_pesquisante","data_nascimento","genero","pagina"].forEach(a=>{$(`#${a}`).on("input",function(o){$("#"+a+"-erro").remove(),$(o.target).off("input")})}),["links","imagens","palavras_chave"].forEach(a=>{$(`#${a} td input`).on("input",function(a){$(a.target).parent($(`#${a.target.id}`)).next("[id *= -erro-]").remove(),$(a.target).off("input")})});